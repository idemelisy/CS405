<!DOCTYPE html>
<html><head><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta charset="utf-8"><title>Demo A — TRS vs RTS</title>
<style>
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:#fff;color:#000;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial}
.page{max-width:100%;margin:0 auto;min-height:100vh;border:2px solid #000;display:flex;flex-direction:column}
.header{padding:12px 16px;border-bottom:2px solid #000}
.title{font-size:32px;font-weight:800}
.content{padding:16px;display:flex;flex-direction:column;gap:12px}
.controls label{display:inline-block;min-width:100%}
.controls input,.controls select{font-size:18px}
canvas{width:100%;height:min(70vh, 820px);min-height:auto;border:2px solid #000;background:#fff;display:block}
#log{white-space:pre-wrap;font-family:ui-monospace,Menlo,Consolas,monospace;border:1px dashed #000;padding:8px;background:#fafafa}
a.nav{display:inline-block;margin:12px 16px 16px 16px;border:2px solid #000;padding:8px 12px;color:#000;text-decoration:none;font-weight:700;align-self:flex-start;background:#fff}

:root{
  --maxw: 1200px;
  --pad: clamp(12px, 2.2vw, 24px);
  --fs-body: clamp(16px, 2.0vw, 28px);
  --fs-title: clamp(22px, 3.2vw, 40px);
  --fs-caption: clamp(14px, 1.6vw, 22px);
}
html, body { height:100%; margin:0; background:#fff; color:#000; }
.page{
  max-width: var(--maxw);
  width: min(100%, var(--maxw));
  margin: 0 auto;
  min-height: 100svh;
  border: 2px solid #000;
  display: flex;
  flex-direction: column;
}
.header{ padding: var(--pad); border-bottom:2px solid #000; }
.title{ font-size: var(--fs-title); font-weight: 800; }
.content{
  padding: var(--pad);
  display:flex; flex-direction:column; gap: clamp(10px,1.5vw,20px);
  font-size: var(--fs-body); line-height:1.5;
}
.slide-img{
  display:block; max-width:100%; height:auto;
  margin: clamp(8px,1.2vw,16px) auto; border:2px solid #000;
}
.figure{ margin:0; }
.caption{ font-size: var(--fs-caption); text-align:center; margin:8px auto 12px; }
.caption span{ display:inline-block; padding:2px 6px; border:1px solid #000; background:#f7f7f7; }
pre{
  background:#f5f5f5; border:1px solid #000;
  padding: clamp(8px,1.5vw,16px);
  white-space: pre-wrap; overflow:auto;
  font-size: clamp(14px,1.8vw,22px);
}
code{ font-size: clamp(14px,1.8vw,22px); }
.nav-prev, .nav-next{
  position: fixed; bottom: clamp(10px, 2vh, 20px);
  padding: clamp(8px,1vw,12px) clamp(10px,1.2vw,14px);
  border:2px solid #000; background:#fff; color:#000; text-decoration:none; font-weight:700; z-index:10;
}
.nav-prev{ left: clamp(10px, 2vw, 24px); }
.nav-next{ right: clamp(10px, 2vw, 24px); }
.footer-spacer{ height: clamp(48px, 8vh, 80px); }
@media (max-width:100%){ .header,.content{ padding:12px; } }


.nav-center{
  position: fixed; bottom: clamp(10px, 2vh, 20px);
  left: 50%; transform: translateX(-50%);
  padding: clamp(8px,1vw,12px) clamp(12px,1.6vw,16px);
  border: 2px solid #000; background:#fff; color:#000;
  font-weight:700; z-index:10; white-space:nowrap;
}
.nav-center a{ color:#000; text-decoration:none; }
.nav-center a + a{ margin-left: 12px; }

</style></head>
<body>
<div class="page">
  <div class="header"><div class="title">Demo A — TRS vs RTS</div></div>
  <div class="content">
    <div class="controls">
      <label>Tx</label><input id="tx" type="range" min="-1.5" max="1.5" step="0.01" value="0">
      <label>Ty</label><input id="ty" type="range" min="-1.0" max="1.0" step="0.01" value="0">
      <label>Tz</label><input id="tz" type="range" min="-2.0" max="2.0" step="0.01" value="0"><br/>
      <label>Rx°</label><input id="rx" type="range" min="-180" max="180" step="1" value="0">
      <label>Ry°</label><input id="ry" type="range" min="-180" max="180" step="1" value="0">
      <label>Rz°</label><input id="rz" type="range" min="-180" max="180" step="1" value="0"><br/>
      <label>Sx</label><input id="sx" type="range" min="0.2" max="3.0" step="0.01" value="1">
      <label>Sy</label><input id="sy" type="range" min="0.2" max="3.0" step="0.01" value="1">
      <label>Sz</label><input id="sz" type="range" min="0.2" max="3.0" step="0.01" value="1">
      <label>Order</label><select id="order"><option>TRS</option><option>RTS</option></select>
    </div>
    <canvas id="gl"></canvas>
    <pre id="log"></pre>
  </div>
  <a class="nav" href="index.html">Back</a>
</div>
<script>
// Column-major 4x4 matrices (OpenGL/WebGL): m[col*4 + row]
const Mat4 = {
  identity: () => [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1],
  multiply: (a,b) => {
    const out = new Array(16);
    for (let c=0;c<4;c++) for (let r=0;r<4;r++)
      out[c*4+r] = a[0*4+r]*b[c*4+0] + a[1*4+r]*b[c*4+1] + a[2*4+r]*b[c*4+2] + a[3*4+r]*b[c*4+3];
    return out;
  },
  translate: (m,[x,y,z]) => Mat4.multiply(m,[1,0,0,0, 0,1,0,0, 0,0,1,0, x,y,z,1]),
  scale: (m,[x,y,z]) => Mat4.multiply(m,[x,0,0,0, 0,y,0,0, 0,0,z,0, 0,0,0,1]),
  rotateX: (m,a) => { const c=Math.cos(a),s=Math.sin(a); return Mat4.multiply(m,[1,0,0,0, 0,c,s,0, 0,-s,c,0, 0,0,0,1]); },
  rotateY: (m,a) => { const c=Math.cos(a),s=Math.sin(a); return Mat4.multiply(m,[c,0,-s,0, 0,1,0,0, s,0,c,0, 0,0,0,1]); },
  rotateZ: (m,a) => { const c=Math.cos(a),s=Math.sin(a); return Mat4.multiply(m,[c,s,0,0, -s,c,0,0, 0,0,1,0, 0,0,0,1]); },
  perspective: (fovy, aspect, near, far) => {
    const f = 1/Math.tan(fovy/2), nf = 1/(near - far);
    return [f/aspect,0,0,0, 0,f,0,0, 0,0,(far+near)*nf,-1, 0,0,(2*far*near)*nf,0];
  },
  lookAt: (eye,center,up) => {
    let [ex,ey,ez]=eye,[cx,cy,cz]=center,[ux,uy,uz]=up;
    let zx=ex-cx, zy=ey-cy, zz=ez-cz; const zlen=Math.hypot(zx,zy,zz); zx/=zlen; zy/=zlen; zz/=zlen;
    let xx=uy*zz-uz*zy, xy=uz*zx-ux*zz, xz=ux*zy-uy*zx; const xlen=Math.hypot(xx,xy,xz); xx/=xlen; xy/=xlen; xz/=xlen;
    let yx=zy*xz-zz*xy, yy=zz*xx-zx*xz, yz=zx*xy-zy*xx;
    return [xx,yx,zx,0,  xy,yy,zy,0,  xz,yz,zz,0,  -(xx*ex+xy*ey+xz*ez), -(yx*ex+yy*ey+yz*ez), -(zx*ex+zy*ey+zz*ez), 1];
  }
};
function resizeCanvasToDisplaySize(canvas){
  const dpr = window.devicePixelRatio || 1;
  const w = Math.max(1, Math.floor(canvas.clientWidth * dpr));
  const h = Math.max(1, Math.floor(canvas.clientHeight * dpr));
  if (canvas.width !== w || canvas.height !== h) { canvas.width=w; canvas.height=h; }
}
function glerr(gl, label){
  const e = gl.getError(); if (e!==gl.NO_ERROR) console.warn(label, e);
}
</script>
<script>
(function(){
  const log = document.getElementById('log');
  const canvas = document.getElementById('gl');
  const gl = canvas.getContext('webgl'); if(!gl){ log.textContent='WebGL not supported'; return; }
  function compile(type, src){ const s=gl.createShader(type); gl.shaderSource(s,src); gl.compileShader(s);
    if(!gl.getShaderParameter(s,gl.COMPILE_STATUS)) throw new Error(gl.getShaderInfoLog(s)); return s; }
  function program(vs,fs){ const p=gl.createProgram(); gl.attachShader(p,compile(gl.VERTEX_SHADER,vs)); gl.attachShader(p,compile(gl.FRAGMENT_SHADER,fs)); gl.linkProgram(p);
    if(!gl.getProgramParameter(p,gl.LINK_STATUS)) throw new Error(gl.getProgramInfoLog(p)); return p; }
  const VS='attribute vec3 aPosition; uniform mat4 uMVP; void main(){ gl_Position = uMVP * vec4(aPosition,1.0);}';
  const FS='precision mediump float; void main(){ gl_FragColor = vec4(0,0,0,1);}';
  let prog; try{ prog=program(VS,FS); }catch(e){ log.textContent=e.toString(); return; }
  gl.useProgram(prog);
  const verts=new Float32Array([ -0.5,0,-0.5,  0.5,0,-0.5,  0.5,0,0.5,  -0.5,0,0.5 ]);
  const idx=new Uint16Array([0,1,2, 0,2,3]);
  const vbo=gl.createBuffer(); gl.bindBuffer(gl.ARRAY_BUFFER,vbo); gl.bufferData(gl.ARRAY_BUFFER,verts,gl.STATIC_DRAW);
  const ibo=gl.createBuffer(); gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,ibo); gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,idx,gl.STATIC_DRAW);
  const aPos=gl.getAttribLocation(prog,'aPosition'); gl.enableVertexAttribArray(aPos); gl.vertexAttribPointer(aPos,3,gl.FLOAT,false,0,0);
  const uMVP=gl.getUniformLocation(prog,'uMVP');
  gl.enable(gl.DEPTH_TEST); gl.clearColor(1,1,1,1);
  function render(){
    resizeCanvasToDisplaySize(canvas);
    const tx=+document.getElementById('tx').value, ty=+document.getElementById('ty').value, tz=+document.getElementById('tz').value;
    const rx=(+document.getElementById('rx').value)*Math.PI/180, ry=(+document.getElementById('ry').value)*Math.PI/180, rz=(+document.getElementById('rz').value)*Math.PI/180;
    const sx=+document.getElementById('sx').value, sy=+document.getElementById('sy').value, sz=+document.getElementById('sz').value;
    const order=document.getElementById('order').value;
    let M=Mat4.identity();
    if(order==='TRS'){ M=Mat4.translate(M,[tx,ty,tz]); M=Mat4.rotateX(M,rx); M=Mat4.rotateY(M,ry); M=Mat4.rotateZ(M,rz); M=Mat4.scale(M,[sx,sy,sz]); }
    else{ M=Mat4.rotateX(M,rx); M=Mat4.rotateY(M,ry); M=Mat4.rotateZ(M,rz); M=Mat4.translate(M,[tx,ty,tz]); M=Mat4.scale(M,[sx,sy,sz]); }
    const V=Mat4.lookAt([1.8,1.2,2.5],[0,0,0],[0,1,0]);
    const P=Mat4.perspective(60*Math.PI/180, canvas.width/canvas.height, 0.1, 100);
    const MVP=Mat4.multiply(Mat4.multiply(P,V),M);
    gl.viewport(0,0,canvas.width,canvas.height);
    gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);
    gl.uniformMatrix4fv(uMVP,false,new Float32Array(MVP));
    gl.drawElements(gl.TRIANGLES, idx.length, gl.UNSIGNED_SHORT, 0);
  }
  ['tx','ty','tz','rx','ry','rz','sx','sy','sz','order'].forEach(id=>document.getElementById(id).addEventListener('input',render));
  window.addEventListener('resize', render);
  render();
})();
</script>
<div class="nav-center"><a href="index.html">Home</a> · <a href="demos/index.html">Demos</a></div>
</body></html>
