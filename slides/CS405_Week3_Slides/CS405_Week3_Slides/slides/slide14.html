    <!doctype html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
      <title>14: 3D Affine Transform (4×4 Block Form)</title>
      
<style>
  :root{
    --maxw: 1100px;
    --pad: clamp(14px, 2.2vw, 28px);
    --fs-body: clamp(18px, 1.9vw, 26px);
    --fs-title: clamp(28px, 3.4vw, 46px);
    --fs-h2: clamp(22px, 2.4vw, 34px);
    --fs-code: clamp(16px, 1.8vw, 22px);
    --gap: clamp(12px, 1.6vw, 22px);
  }
  html, body { height:100%; margin:0; background:#fff; color:#000; }
  .page{ max-width: var(--maxw); width:min(100%, var(--maxw)); margin:0 auto; min-height:100svh;
         border:1.5px solid #000; display:flex; flex-direction:column; }
  .header{ padding: var(--pad); border-bottom:1.5px solid #000; }
  .title{ font-size: var(--fs-title); font-weight:800; letter-spacing:0.2px; }
  .content{ padding: var(--pad); display:flex; flex-direction:column; gap: var(--gap);
            font-size: var(--fs-body); line-height:1.55; }
  h2{ font-size: var(--fs-h2); margin: 0 0 6px 0; }
  ul, ol{ padding-left: 1.2em; margin: 0.2em 0; }
  li{ margin: 0.15em 0; }
  .formula{
    font-family: ui-monospace, Menlo, Consolas, monospace;
    font-size: calc(var(--fs-code) + 2px);
    border:1.5px solid #000; padding: 14px 16px; background:#f2f2f2;
    white-space: pre; overflow:auto; border-left-width:6px;
  }
  pre{
    background:#fafafa; border:1.5px solid #000; padding: 14px 16px;
    font-size: var(--fs-code); line-height:1.5; overflow:auto; margin: 0;
  }
  code{ font-family: ui-monospace, Menlo, Consolas, monospace; }
  .nav-prev, .nav-next{
    position: fixed; bottom: clamp(10px, 2vh, 20px);
    padding: clamp(8px,1vw,12px) clamp(10px,1.2vw,14px);
    border:1.5px solid #000; background:#fff; color:#000; text-decoration:none; font-weight:700; z-index:10;
   pointer-events:auto; z-index:9999;  pointer-events:auto; z-index:9999; }
  .nav-prev{ left: clamp(10px, 2vw, 24px);  pointer-events:auto; z-index:9999; }
  .nav-next{ right: clamp(10px, 2vw, 24px);  pointer-events:auto; z-index:9999; }
  .nav-center{
    position: fixed; bottom: clamp(10px, 2vh, 20px); left: 50%; transform: translateX(-50%);
    padding: clamp(8px,1vw,12px) clamp(12px,1.6vw,16px); border: 1.5px solid #000; background:#fff;
    color:#000; font-weight:700; z-index:10; white-space:nowrap;
  }
  .nav-center a{ color:#000; text-decoration:none; }
  .nav-center a + a{ margin-left:12px; }
  /* Ensure content not hidden behind fixed nav */
  .content::after{ content: ""; display:block; height: clamp(60px, 8vh, 100px); }
</style>

    </head>
    <body>
      <div class="page">
        <div class="header"><div class="title">14: 3D Affine Transform (4×4 Block Form)</div></div>
        <div class="content">
          <h2>3D Affine Transform (4×4 Block Form)</h2>
          <p>An affine transform maps points by <code>x' = A x + T</code>, preserving straight lines and parallelism. The 4×4 (column‑major) form:</p>
          <pre class="formula">[ A11 A12 A13 0 ]
[ A21 A22 A23 0 ]
[ A31 A32 A33 0 ]
[ Tx  Ty  Tz  1 ]</pre>
          <ul>
            <li><strong>Rigid:</strong> A=R ∈ SO(3), RᵀR=I, det R=+1 (rotation only) + translation T.</li>
            <li><strong>Similarity:</strong> A=sR (uniform scale s) + T; angles preserved, lengths scale by s.</li>
            <li><strong>Affine (general):</strong> A arbitrary (non‑uniform scale/shear/reflection), |det A|≠1 scales volume.</li>
          </ul>
          <pre><code>// WebGL composition (column‑major): M = T · R · S
function mul4(a,b){{const o=new Array(16);
  for(let c=0;c<4;c++)for(let r=0;r<4;r++)
    o[c*4+r]=a[0*4+r]*b[c*4+0]+a[1*4+r]*b[c*4+1]+a[2*4+r]*b[c*4+2]+a[3*4+r]*b[c*4+3];
  return o;}}
const Tm=(x,y,z)=>[1,0,0,0, 0,1,0,0, 0,0,1,0, x,y,z,1];
const Sm=(x,y,z)=>[x,0,0,0, 0,y,0,0, 0,0,z,0, 0,0,0,1];</code></pre>
          <p><em>Check:</em> det(R)=+1. For uniform scale s, det(sR)=s³. For general A, det(A)&lt;0 flips orientation; |det(A)|≠1 scales volume.</p>
          <div class="footer-spacer"></div>
        </div>
      </div>
      
      
      
    
<a class="nav-prev" href="slide13.html">Prev</a>
<a class="nav-next" href="slide15.html">Next</a>
<div class="nav-center"><a href="../index.html">Home</a> · <a href="../demos/index.html">Demos</a></div>
</body>
    </html>
